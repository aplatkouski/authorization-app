(()=>{"use strict";var e={8090:(e,t,r)=>{var a=r(7294),n=r(3935),o=r(7703),i=r(4890),s=r(8500),c=r(3894),l=r(4500),u=r.n(l),p=r(9713),d=r.n(p),m=r(6479),g=r.n(m),y=r(5503);r(7397),r(4642);const b=y.Z.initializeApp({apiKey:"AIzaSyAS9c_DqlA35KLLmkmGJrBiAz6tymgv5Z8",authDomain:"authorization-app-5f440.firebaseapp.com",databaseURL:"https://authorization-app-5f440-default-rtdb.firebaseio.com",projectId:"authorization-app-5f440",storageBucket:"authorization-app-5f440.appspot.com",messagingSenderId:"889651249590",appId:"1:889651249590:web:7dcfd4de13f1b2fbc58117"}),f=b.database(),h=b.auth(),O="DATABASE/SHOW_LOADER",E="DATABASE/HIDE_LOADER";function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const j=(e,t,r)=>f.ref(`users/${e}/${t}`).set(r);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const S={isLoading:!0},A={[E]:e=>P(P({},e),{},{isLoading:!1}),[O]:e=>P(P({},e),{},{isLoading:!0}),DEFAULT:e=>e},R="USER/FETCH_USERS",U="USER/LOGIN_FAILURE",x="USER/LOGIN_SUCCESS",L="USER/SIGN_OUT",Z="USER/REGISTER_FAILURE",k="USER/UPDATE_DATA",I="USER/UPDATE_FAILURE";function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const F=()=>((async()=>{h.signOut()})(),{type:L}),q=e=>({type:x,payload:e}),N=e=>({type:U,payload:e}),M=()=>async e=>{e({type:O});try{await(async()=>{const e=f.ref("users/");return(e=>{const t=e=>new Date(e).toLocaleDateString("ru-Ru",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),r=[];return e.forEach((e=>{r.push(v(v({},e.val()),{},{id:e.key.substring(0,7),uid:e.key,registrationDate:t(e.child("registrationDate").val()),lastLoginDate:t(e.child("lastLoginDate").val())}))})),r})(await e.once("value"))})().then((t=>e({type:R,payload:t})))}catch(t){t.message&&e({type:I,payload:t.message})}e({type:E})};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const B={uid:"",allUsers:[],isAuth:!1,errorMessage:""},G={"USER/FAILURE":(e,{payload:t})=>z(z({},e),{},{errorMessage:t}),[R]:(e,{payload:t})=>z(z({},e),{},{allUsers:t}),"USER/FETCH_FAILURE":(e,{payload:t})=>z(z({},e),{},{errorMessage:t}),[U]:(e,{payload:t})=>z(z({},e),{},{errorMessage:t}),[x]:(e,{payload:t})=>z(z({},e),{},{uid:t,isAuth:!0}),[L]:e=>z(z({},e),B),[Z]:(e,{payload:t})=>z(z({},e),{},{errorMessage:t}),[k]:(e,{payload:t})=>{const r=[...e.allUsers];return r.splice(e.allUsers.findIndex((e=>e.uid===t.uid)),1,t),z(z({},e),{},{allUsers:r})},[I]:(e,{payload:t})=>z(z({},e),{},{errorMessage:t}),DEFAULT:e=>e},H=(0,i.UY)({database:(e=S,t)=>(A[t.type]||A.DEFAULT)(e,t),user:(e=B,t)=>(G[t.type]||G.DEFAULT)(e,t)}),$=(0,s.Uo)({trace:!0,traceLimit:25}),K=(0,i.MT)(H,$((0,i.md)(u(),c.Z)));var W=r(682),J=r(5697),V=r.n(J),Y=r(548),Q=r(2318),X=r(5005);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const re=({isAuth:e,isRegistration:t,login:r,signUp:n})=>{const[o,i]=(0,a.useState)({username:"",password:"",email:""}),[s,c]=(0,a.useState)(!1),l=e=>{e.persist();const{name:t,value:r}=e.target;i((e=>te(te({},e),{},{[t]:r})))},{name:u,password:p,email:d}=o;return a.createElement(Y.Z,{className:"authentication-form",onSubmit:e=>{e.preventDefault(),t?n(te(te({},o),{},{registrationDate:Date.now(),lastLoginDate:Date.now(),isActive:!0})):r(o),c(!0)},validated:s},t&&a.createElement(Y.Z.Group,{controlId:"validationUsername"},a.createElement(Y.Z.Control,{autoComplete:"off",name:"username",onChange:l,placeholder:"Username",required:!0,type:"text",value:u}),a.createElement(Y.Z.Control.Feedback,{type:"invalid"},"Please choose a username."),a.createElement(Y.Z.Control.Feedback,null,"Looks good!")),a.createElement(Y.Z.Group,{controlId:"validationUserEmail"},a.createElement(Q.Z,{hasValidation:!0},a.createElement(Q.Z.Prepend,null,a.createElement(Q.Z.Text,{id:"inputGroupPrepend"},"@")),a.createElement(Y.Z.Control,{autoComplete:"off",name:"email",onChange:l,placeholder:"Email",required:!0,type:"email",value:d}),a.createElement(Y.Z.Control.Feedback,{type:"invalid"},"Please type a correct email."))),a.createElement(Y.Z.Group,{controlId:"formBasicPassword"},a.createElement(Y.Z.Control,{"aria-describedby":"passwordHelpBlock",autoComplete:"off",minLength:Number(1),name:"password",onChange:l,pattern:".+",placeholder:"Password",required:!0,type:"password",value:p}),a.createElement(Y.Z.Control.Feedback,{type:"invalid"},"Password is required.")),a.createElement(X.Z,{className:"text-uppercase",disabled:e,type:"submit",variant:"primary"},t?"Sign up":"Login"))};re.propTypes={isAuth:V().bool.isRequired,isRegistration:V().bool.isRequired,login:V().func.isRequired,signUp:V().func.isRequired};const ae=re,ne={login:({email:e,password:t})=>async r=>{try{const a=await(async({email:e,password:t})=>(await h.signInWithEmailAndPassword(e,t),String(h.currentUser.uid)))({email:e,password:t});await j(a,"lastLoginDate",Date.now()),r(q(a))}catch({message:e}){e&&r(N(e))}},signUp:e=>async t=>{try{const{password:r,email:a}=e,n=g()(e,["password","email"]);await h.createUserWithEmailAndPassword(a,r),h.onAuthStateChanged((async e=>{if(e){const r=String(e.uid),o=T(T({email:a},n),{},{uid:r});await(async e=>{const{uid:t}=e,r=g()(e,["uid"]),a=f.ref(`users/${t}`);return await a.set(v({},r)),e})(o),t(q(r))}else t(N("I cannot get UID of new user!"))}))}catch({message:e}){e&&t({type:Z,payload:e})}}},oe=(0,o.$j)(((e,t)=>({isAuth:e.user.isAuth,isRegistration:t.isRegistration})),ne)(ae);var ie=r(5062),se=r(4908);const ce=({errorMessage:e,isAuth:t})=>{const[r,n]=a.useState(!1),o=e=>{e.preventDefault(),n((e=>!e))};return a.createElement(ie.Z,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"login-modal",onHide:()=>null,show:!t},a.createElement(ie.Z.Header,null,a.createElement(ie.Z.Title,{className:"text-center",id:"contained-modal-title-vcenter"},"Authorization App")),a.createElement(ie.Z.Body,null,e&&a.createElement(se.Z,{className:"text-warning text-center"},e),a.createElement(oe,{isRegistration:r})),a.createElement(ie.Z.Footer,{className:"pt-0 pb-0"},r?a.createElement("div",{className:"block-signup"},a.createElement("span",{"aria-labelledby":"move-to-register-form",className:"text-uppercase btn-signup",onClick:o,onKeyDown:o,role:"button",tabIndex:0},"Back to login")):a.createElement("div",{className:"block-signup block-login"},a.createElement("h6",{className:"pt-2"},"Donâ€™t have an account?"),a.createElement("span",{"aria-labelledby":"move-to-register-form",className:"text-uppercase btn-signup btn-login",onClick:o,onKeyDown:o,role:"button",tabIndex:0},"Sign up"))))};ce.propTypes={errorMessage:V().string.isRequired,isAuth:V().bool.isRequired};const le=ce,ue=(0,o.$j)((e=>({errorMessage:e.user.errorMessage,isAuth:e.user.isAuth})))(le);var pe=r(9798),de=r(2086),me=r(9551),ge=r(814);const ye=({users:e})=>{const t=(0,o.I0)(),r=(0,o.v9)((e=>e.user.uid)),n=(0,a.useRef)(null),i=a=>{n.current.selectionContext.selected.forEach((n=>{t(((e,t,r)=>async a=>{const{uid:n}=t;await j(n,"isActive",r),a({type:k,payload:T(T({},t),{},{isActive:r})}),n!==e||r||a(F())})(r,e.find((e=>e.uid===n)),a))}))};return a.createElement(me.Z,{ref:n,caption:a.createElement(pe.Z,{"aria-label":"Toolbar with button groups"},a.createElement(de.Z,{className:"mb-2",size:"lg"},a.createElement(X.Z,{onClick:()=>i(!1),variant:"outline-warning"},"Block"),a.createElement(X.Z,{onClick:()=>i(!0),variant:"outline-success"},"Unblock"),a.createElement(X.Z,{onClick:()=>{n.current.selectionContext.selected.forEach((e=>{t(((e,t)=>async r=>{try{t===e&&r(F())}catch({message:e}){e&&r({type:Z,payload:e})}})(r,e))}))},variant:"outline-danger"},"Delete"))),columns:[{dataField:"id",text:"ID"},{dataField:"username",text:"Username"},{dataField:"email",text:"Email"},{dataField:"registrationDate",text:"Registration Date"},{dataField:"lastLoginDate",text:"Last Login Date"},{dataField:"isActive",text:"Status"}],data:e,hover:!0,keyField:"uid",noDataIndication:"Table is Empty",pagination:(0,ge.ZP)(),selectRow:{mode:"checkbox",clickToSelect:!0},striped:!0})};ye.propTypes={users:V().arrayOf(V().shape({id:V().string.isRequired,uid:V().string.isRequired,username:V().string.isRequired,email:V().string.isRequired,registrationDate:V().string.isRequired,lastLoginDate:V().string.isRequired,isActive:V().bool.isRequired}).isRequired).isRequired};const be=ye;var fe=r(6968),he=r(4051);const Oe=({isAuth:e,isLoading:t})=>{const r=(0,o.v9)((e=>e.user.allUsers));return a.createElement(he.Z,{className:"main-view"},e?t?a.createElement(fe.Z,{animation:"border",role:"status"},a.createElement("span",{className:"sr-only"},"Loading...")):a.createElement(be,{users:r}):null)};Oe.propTypes={isAuth:V().bool.isRequired,isLoading:V().bool.isRequired};const Ee=Oe,we=(0,o.$j)((e=>({isAuth:e.user.isAuth,isLoading:e.database.isLoading})))(Ee),ve=()=>{const e=(0,o.I0)(),t=(0,o.v9)((e=>e.user.isAuth));return(0,a.useEffect)((()=>{h.currentUser&&e(M())}),[t,e]),a.createElement(W.Z,{className:"app-container",fluid:!0},a.createElement(we,null),a.createElement(ue,null))},je=document.getElementById("root");n.render(a.createElement(a.StrictMode,null,a.createElement(o.zt,{store:K},a.createElement(ve,null))),je)}},t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=e,r.x=e=>{},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={296:0},t=[[8090,329]],a=e=>{},n=(n,o)=>{for(var i,s,[c,l,u,p]=o,d=0,m=[];d<c.length;d++)s=c[d],r.o(e,s)&&e[s]&&m.push(e[s][0]),e[s]=0;for(i in l)r.o(l,i)&&(r.m[i]=l[i]);for(u&&u(r),n&&n(o);m.length;)m.shift()();return p&&t.push.apply(t,p),a()},o=self.webpackChunkauthorization_app=self.webpackChunkauthorization_app||[];function i(){for(var a,n=0;n<t.length;n++){for(var o=t[n],i=!0,s=1;s<o.length;s++){var c=o[s];0!==e[c]&&(i=!1)}i&&(t.splice(n--,1),a=r(r.s=o[0]))}return 0===t.length&&(r.x(),r.x=e=>{}),a}o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o));var s=r.x;r.x=()=>(r.x=s||(e=>{}),(a=i)())})(),r.x()})();